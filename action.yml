name: "Deploy to QuantCDN"
description: "An action to deploy your build to QuantCDN"
author: "QuantCDN"
inputs:
  customer:
    description: "Your customer account name"
    required: true
  project:
    description: "Your project name"
    required: true
  token:
    description: "Your API token"
    required: true
  dir:
    description: "The directory to deploy"
    required: true
    default: ""
  attachments:
    description: 'Find attachments'
    required: false
    default: false
  skip-unpublish:
    description: 'Skip automatic unpublishing of assets'
    required: false
    default: false
  chunk-size:
    description: 'Number of items proccessed in each chunk. Increase this value for more concurrency.'
    required: false
    default: 10
runs:
  using: "docker"
  image: "docker://quantcdn/cli:1.7.0"
  entrypoint: quant
  args:
    - deploy
    - /github/workspace/${{ inputs.dir }}
    - -c ${{ inputs.customer }}
    - -t ${{ inputs.token }}
    - -p ${{ inputs.project }}
    - -a ${{ inputs.attachments }}
    - --skip-unpublish=${{ inputs.skip-unpublish }}
    - --chunk-size=${{ inputs.chunk-size }}
branding:
  icon: "upload-cloud"
  color: "blue"
